<!DOCTYPE html>
<html>
<head>
 <title>Tomar foto</title>
 <script src="https://unpkg.com/peerjs@1.3.2/dist/peerjs.min.js"></script>                                                 
</head>
<body>
 <video id="video" width="300" height="480"></video>
 <button id="take-photo">Tomar foto</button>
 <script>
 // Crear un objeto Peer
 const peer = new Peer();

 peer.on('open', id => {
 console.log('ID del peer:', id);
 const conn = peer.connect('receptor');
 conn.on('open', () => {
 console.log('Conexi칩n establecida');
 });
 });

 // Pedir permiso para acceder a la c치mara
 navigator.mediaDevices.getUserMedia({ video: true })
 .then(stream => {
 const video = document.getElementById('video');
 video.srcObject = stream;
 video.play();

 const takePhotoButton = document.getElementById('take-photo');
 takePhotoButton.addEventListener('click', () => {
 const canvas = document.createElement('canvas');
 canvas.width = video.videoWidth;
 canvas.height = video.videoHeight;
 const ctx = canvas.getContext('2d');
 ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
 const photo = canvas.toDataURL();

 // Enviar la foto al otro peer
 if (peer.connections.receptor) {
 peer.connections.receptor[0].send(photo);
 } else {
 console.error('La conexi칩n no est치 establecida');
 }
 });
 })
 .catch(error => console.error(error));
 </script>
</body>
</html>
